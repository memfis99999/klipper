# Симулятор 3д принтера на базе процесса

---

## Задача ветки

Добавляем симулятор на базе линукс приложения. Сщздаём виртуальный принтер.
симулятор будет использоваться совместно с KlipperLab для проверки работы скриптов и gcode в конкретном окружении но на компьютере - нужные версии klipper, moonraker, nginx, fluidd/mainsail - все то, что можно проверить и настроить перед установкой на 3д принтер.

---

## Как будет работать

- Запускаем клиппер слинукс процессом нашего симулятора. ссылка будет позже.
- для полного окружения будем использовать наш KlipperLab, который доработаем позже.

---

## ToDo

- [x] Создаём новую ветку linux-sim.
- [ ] Создаём каталог нашего симулятора.
  - [x] Копируем src/linux -> src/linux-sim.
  - [x] Вносим правки в src/linux-sim/Kconfig, Makefile.
  - [x] Добавляем наш симулятор в src/Kconfig.
  - [ ] Проверка компиляции и первый комит.
- [ ] Отключаем вызовы системных функций для управления gpio, adc, pwm, i2c, spi и перенаправляем все эти вызовы в лог.
- [ ] Зачатки самого виртуального принтера.
  - [ ] Обработка изменения состояния виртуальных пинов.
  - [ ] Изменяем состояние счетчиков положения.
  - [ ] Расчет текущих координат по данным из счетчиков шаговых моторов.
  - [ ] управляем концевиками осей.
  - [ ] Возвращаем температуру через ацп.
  - [ ] добавляем нагреватели и математику расчета нагрева от мощности нагревателя и мощности теплоотдачи при выключеном нагревателе от времени.температуру отдаем в ацп.
